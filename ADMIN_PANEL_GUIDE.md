# 🎛️ מדריך פאנל ניהול Gray Mirror

## סקירה כללית
יצרתי עבורך פאנל ניהול מערכת מתקדם ומקיף שמאפשר לך לשלוט על כל הפרמטרים של המערכת בזמן אמת!

## 🚀 איך להיכנס לפאנל המנהל

1. **התחבר למערכת** עם המייל: `alonsaranga@gmail.com` או `admin@graymirror.com`
2. **לחץ על כפתור "מנהל"** בפינה הימנית העליונה של הדשבורד
3. **או נווט ישירות** ל: `http://localhost:5173/admin`

---

## 📋 מה אפשר לשנות בפאנל המנהל?

### 1. 💬 **הגדרות מכסות הודעות**
- **מכסת Free Plan**: קבע כמה הודעות ליום משתמשים חינמיים יכולים לשלוח
- **מכסת Premium Plan**: 0 = ללא הגבלה, או קבע מספר ספציפי
- **מיידי**: השינוי חל על משתמשים חדשים מיד

### 2. 👥 **דמויות ברירת מחדל**
- **הוסף/הסר דמויות** שיוצגו בצ'אט החדש
- **שם**: שם הדמות (לדוגמה: "אליס")
- **זהות**: תיאור התפקיד (לדוגמה: "מדענית חלל אופטימית")
- **משפיע על**: כל המשתמשים בפתיחת צ'אט חדש

### 3. 🎬 **סצנת ברירת מחדל**
- **הגדר את הסצנה הראשונית** שתוצג בכל צ'אט חדש
- **דוגמה**: "תא שליטה של חללית. אזעקה נשמעת."
- **משפיע על**: התחלת כל שיחה חדשה

### 4. 🎨 **הגדרות ממשק (UI)**
- **צבע ראשי**: כחול/סגול/ירוק/אדום/כתום
- **מקסימום משתתפים**: 2-20 משתתפים בשיחה
- **מהירות שיחה**: 1-10 (ברירת מחדל: 5)
- **מצב לילה כברירת מחדל**: כן/לא
- **הצג הודעת ברוכים הבאים**: כן/לא

### 5. 🔓 **Feature Flags - הפעלת/כיבוי תכונות**
אפשר לך לשלוט אילו תכונות פעילות בממשק:
- ✅ **צ'אט מתקדם** - הפעל/כבה גישה לצ'אט המתקדם
- ✅ **פודקאסטים AI** - הפעל/כבה את פלטפורמת הפודקאסטים
- ✅ **קול** - הפעל/כבה תמיכה בקול
- ✅ **היסטוריית שיחות** - הצג/הסתר את ההיסטוריה
- ✅ **ניהול סוכנים** - הפעל/כבה ניהול סוכנים

---

## 🔄 איך זה עובד?

### ארכיטקטורה
```
פאנל מנהל (Admin Panel)
        ↓
   Firestore: collection 'settings' / document 'global'
        ↓
   SettingsContext (Real-time sync)
        ↓
   כל הרכיבים במערכת
```

### תהליך שינוי:
1. **שנה הגדרה** בפאנל המנהל
2. **לחץ "שמור הגדרות"**
3. **השינוי נשמר ב-Firestore**
4. **כל המשתמשים** מקבלים את השינוי **באופן מיידי** (real-time)
5. **ממשקים מתעדכנים** אוטומטית

---

## 💡 דוגמאות שימוש

### דוגמה 1: הפעלת צ'אט מתקדם
1. כנס לפאנל מנהל
2. גלול ל-"הפעלת תכונות"
3. לחץ על הסוויץ' ליד "צ'אט מתקדם"
4. לחץ "שמור הגדרות"
5. **תוצאה**: כל המשתמשים רואים עכשיו את הכפתור "צ'אט מתקדם" במקום סמל המנעול

### דוגמה 2: שינוי מכסת הודעות ל-500
1. כנס לפאנל מנהל
2. במדור "הגדרות מכסות הודעות"
3. שנה את "מכסת הודעות יומית - Free Plan" ל-500
4. לחץ "שמור הגדרות"
5. **תוצאה**: משתמשים חדשים יקבלו 500 הודעות ליום

### דוגמה 3: הוספת דמות חדשה
1. כנס לפאנל מנהל
2. במדור "דמויות ברירת מחדל"
3. הקלד שם: "צ'ארלי"
4. הקלד זהות: "מהנדס רובוטיקה חכם"
5. לחץ "+ הוסף דמות"
6. לחץ "שמור הגדרות"
7. **תוצאה**: בצ'אט חדש יופיעו 3 דמויות

---

## 📁 קבצים שנוצרו

### Frontend:
- `src/pages/AdminPage.jsx` - הממשק המלא של פאנל המנהל
- `src/contexts/SettingsContext.jsx` - ניהול הגדרות גלובליות + Real-time sync
- `src/utils/initializeSettings.js` - אתחול הגדרות ראשוניות

### עדכונים:
- `src/App.jsx` - הוספת SettingsProvider + Route לאדמין
- `src/pages/DashboardPage.jsx` - קריאת Feature Flags + מכסות מההגדרות
- `src/components/ChatComponent.jsx` - טעינת דמויות וסצנה מההגדרות

---

## 🔒 אבטחה

- **גישה מוגבלת**: רק מייל admin@graymirror.com או alonsaranga@gmail.com
- **Route מוגן**: AdminRoute בודק הרשאות לפני כניסה
- **Redirect**: משתמשים לא מורשים מועברים אוטומטית ל-/dashboard

---

## ⚙️ הגדרות ראשוניות

אם עדיין לא יצרת את ההגדרות הראשוניות ב-Firestore:

### אופציה 1: דרך הקונסול
```javascript
import { initializeSettings } from './utils/initializeSettings';
initializeSettings();
```

### אופציה 2: ידנית ב-Firestore Console
1. פתח Firebase Console
2. Firestore Database
3. צור Collection: `settings`
4. צור Document: `global`
5. העתק את ההגדרות מ-`src/utils/initializeSettings.js`

---

## 🎯 תכונות מתקדמות

### Real-time Updates
- כל השינויים מתעדכנים **בזמן אמת** לכל המשתמשים
- אין צורך ברענון הדף
- משתמש `onSnapshot` של Firestore

### Fallback
- אם אין הגדרות ב-Firestore, המערכת משתמשת בהגדרות ברירת מחדל
- המערכת לא תקרוס גם אם יש בעיה בטעינת ההגדרות

### UI מודרני
- עיצוב נקי וצבעוני
- Toggles אינטראקטיביים
- הודעות הצלחה/שגיאה
- Responsive לכל הגדלים

---

## 🚀 צעדים הבאים (אופציונלי)

1. **הוסף אנליטיקה**: עקוב אחרי שינויים בהגדרות
2. **היסטוריית שינויים**: שמור מי שינה מה ומתי
3. **תבניות הגדרות**: שמור מספר תצורות מוכנות
4. **ייבוא/ייצוא**: העתק הגדרות בין סביבות
5. **הרשאות מתקדמות**: תמיכה במספר רמות מנהלים

---

## 📞 עזרה

- **פאנל לא נטען?** → בדוק שאתה מחובר עם המייל הנכון
- **שינויים לא נשמרים?** → בדוק חיבור לאינטרנט ו-Firestore
- **תכונה לא עובדת?** → בדוק את הקונסול בדפדפן לשגיאות

---

**כל השינויים נדחפו ל-GitHub ומוכנים לשימוש! 🎉**

